<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap-theme.min.css">
		<link rel="stylesheet" type="text/css" href="css/index.css">
		<meta charset="UTF-8">
		<title>Reserva</title>
	</head>
	<body >
		<div class="container">
			<section>
				<div class="row">
					<div class="col-xs-12 col-md-offset-4 col-md-4">
						<p><h1>Selecciona tu destino</h1></p>
						<p><small>Arrastra el punto y confirma tu destino</small></p>
					</div>
					<div class="col-xs-12" id="map"></div>
					<div class="col-xs-12 col-md-offset-4 col-md-4">
						<button class="btn btn-block btn-lg btn-default">Buscar</button>
					</div>
				</div>
			</section>
			<section>
				<div class="row" style="height: 300px;">
					<div class="col-xs-4">
						<img src="img/aeromexico.png" style="width: 100%;">
					</div>
					<div class="col-xs-4">
						<img src="img/interjet.png" style="width: 100%;">
					</div>
					<div class="col-xs-4">
						<img src="img/uber_transparent.png" style="width: 100%;">
					</div>
				</div>
				<div class="row" style="height: 300px;">
					<div class="col-xs-4">
						<img src="img/Mexicana_Logo.png" style="width: 100%;">
					</div>
					<div class="col-xs-4">
						<img src="img/prive_jets.png" style="width: 100%;">
					</div>
					<div class="col-xs-4">
						<img src="img/volaris.png" style="width: 100%;">
					</div>
				</div>
			</section>
			

		</div>
	</body>
	<script type="text/javascript" src="js/angular.min.js"></script>
	<script type="text/javascript" src="js/jquery-1.12.3.min.js"></script>
	<script type="text/javascript">
	var markerS;
	var markerLl;
	var LineS;
	var LineLl;
	var linea;
	var geocoder;
	var map;
	var infowindow;
	var imageMS = 'img/Salida.png';
	var imageMLl='img/Llegada.png';
	function initMap() {
		var myLatLng = {lat: 23.4598087, lng: -100.3507389};
		map = new google.maps.Map(document.getElementById('map'), {
			zoom: 4,
			center: myLatLng
		});

		markerS = new google.maps.Marker({
			map: map,
			draggable: true,
			animation: google.maps.Animation.DROP,
			position: {lat: 21.864865607746523, lng: -102.28433265000001},
			icon: imageMS
		});
		markerLl = new google.maps.Marker({
			map: map,
			draggable: true,
			animation: google.maps.Animation.DROP,
			position:{lat: 36.24719896448074, lng: -115.11636390000001},
			icon:imageMLl
		});
		geocoder = new google.maps.Geocoder;
		infowindow = new google.maps.InfoWindow;
		markerLl.addListener('click', toggleBounceLl);
		markerLl.addListener('dragend', obtenerInfoLl);
		markerS.addListener('click', toggleBounceS);
		markerS.addListener('dragend', obtenerInfoS);
	}
	//function borrar(){
  	//	flightPath.setMap(null);
	//}
	function toggleBounceS() {
		if (markerS.getAnimation() !== null) {
			markerS.setAnimation(null);
		} else {
			markerS.setAnimation(google.maps.Animation.BOUNCE);
		}
	}
	function toggleBounceLl() {
		if (markerLl.getAnimation() !== null) {
			markerLl.setAnimation(null);
		} else {
			markerLl.setAnimation(google.maps.Animation.BOUNCE);
		}
	}
	function obtenerInfoS(){
		console.log("Salida:");
		var lat = this.getPosition().lat();
		console.log(lat);
		var lng = this.getPosition().lng();
		console.log(lng);
		LineS={lat: lat,lng: lng};
		var latlng = {lat: lat, lng: lng};
		geocoder.geocode({'location': latlng}, function(results, status) {
			if (status === google.maps.GeocoderStatus.OK) {
				if (results[1]) {
					infowindow.setContent(results[1].formatted_address);
					//infowindow.open(map, this);
					//console.log("como que pedo");
				} else {
					window.alert('No results found');
				}
			} else {
				window.alert('Geocoder failed due to: ' + status);
			}
		});
	}
	function obtenerInfoLl(){
		console.log("Llegada:");
		var lat = this.getPosition().lat();
		console.log(lat);
		var lng = this.getPosition().lng();
		console.log(lng);
		LineLl={lat: lat,lng: lng};
		var latlng = {lat: lat, lng: lng};
		geocoder.geocode({'location': latlng}, function(results, status) {
			if (status === google.maps.GeocoderStatus.OK) {
				if (results[1]) {
					infowindow.setContent(results[1].formatted_address);
					//infowindow.open(map, this);
					//console.log("como que pedo");
				} else {
					window.alert('No results found');
				}
			} else {
				window.alert('Geocoder failed due to: ' + status);
			}
		});
		var LineaVuelo=[LineS,LineLl];
		dibujaLinea(LineaVuelo);
		marca();
  		
  	}
  	function dibujaLinea(LineaVuelo){
		linea = new google.maps.Polyline({
    		path: LineaVuelo,
    		geodesic: true,
    		strokeColor: '#FF0000',
    		strokeOpacity: 1.0,
    		strokeWeight: 2
  		});
  	}
  	function marca(){
  		linea.setMap(map);
  	}
  	function desmarca(){
  		linea.setMap(null);
  	}

	$(window).resize(function () {
		var h = $(window).height(),
		offsetTop = 30; // Calculate the top offset
		$('#map').css('height', (h - offsetTop));
	}).resize();
    </script>
	<script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD7zi0iyv1inGdIwlU5PV4n6S7pVRyKwQA&callback=initMap">
    </script>

</html>